<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Flora Car Filo – Yeni Sezon</title>

  <!-- Basit, tek dosyalık modern tasarım (HTML + CSS + JS bir arada) -->

  <style>
    :root{
      --bg:#050814;
      --bg-soft:#0b1020;
      --card:#0f172a;
      --border:#1f2937;
      --text:#f9fafb;
      --muted:#9ca3af;
      --accent:#e11d48;
      --accent-soft:#fb7185;
      --wa:#25D366;
      --radius-lg:18px;
      --radius-md:12px;
      --shadow:0 18px 45px rgba(15,23,42,0.7);
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family: system-ui,-apple-system,BlinkMacSystemFont,"Inter",Roboto,Arial,sans-serif;
      background:
        radial-gradient(circle at top left,#1d4ed8 0,transparent 55%),
        radial-gradient(circle at bottom right,#e11d48 0,transparent 55%),
        var(--bg);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      line-height:1.5;
    }
    img{max-width:100%;display:block}
    a{text-decoration:none;color:inherit}

    /* HEADER */
    header{
      position:sticky;
      top:0;
      z-index:10;
      backdrop-filter:blur(18px);
      background:rgba(5,8,20,0.92);
      border-bottom:1px solid rgba(148,163,184,0.35);
      padding:10px 5%;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
    }
    .logo{
      display:flex;
      align-items:center;
      gap:10px;
    }
    .logo img{
      height:40px;
      border-radius:8px;
      object-fit:contain;
    }
    .logo-text-main{
      font-size:13px;
      font-weight:800;
      letter-spacing:.12em;
      text-transform:uppercase;
    }
    .logo-text-sub{
      font-size:11px;
      color:var(--muted);
    }
    nav{
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      justify-content:flex-end;
    }
    nav a{
      font-size:12px;
      padding:6px 10px;
      border-radius:999px;
      color:#e5e7eb;
      border:1px solid transparent;
      white-space:nowrap;
      transition:background .18s ease,border-color .18s ease,transform .15s ease;
    }
    nav a:hover{
      background:rgba(15,23,42,0.9);
      border-color:rgba(148,163,184,0.5);
      transform:translateY(-1px);
    }

    main{
      max-width:1150px;
      margin:0 auto;
      padding:16px 5% 40px;
    }

    /* HERO */
    .hero{
      border-radius:24px;
      overflow:hidden;
      background:radial-gradient(circle at top,#111827,#020617);
      box-shadow:var(--shadow);
      margin-bottom:26px;
      position:relative;
      isolation:isolate;
    }
    .hero-media{
      position:relative;
      height:230px;
      overflow:hidden;
    }
    .hero-media img{
      width:100%;
      height:100%;
      object-fit:cover;
      transform:scale(1.03);
      filter:brightness(.9);
    }
    .hero-overlay{
      position:absolute;
      inset:0;
      background:linear-gradient(to top,rgba(15,23,42,0.95),rgba(15,23,42,0.05));
      display:flex;
      flex-direction:column;
      justify-content:flex-end;
      padding:18px 20px;
      gap:10px;
    }
    .hero-pill{
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:4px 9px;
      border-radius:999px;
      border:1px solid rgba(248,250,252,0.15);
      background:rgba(15,23,42,0.85);
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:.13em;
      color:var(--accent-soft);
      font-weight:700;
    }
    .hero h1{
      font-size:22px;
      font-weight:800;
    }
    .hero-sub{
      font-size:12px;
      color:var(--muted);
      max-width:520px;
    }
    .hero-actions{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      margin-top:6px;
    }
    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:6px;
      padding:9px 16px;
      border-radius:999px;
      border:1px solid transparent;
      font-size:13px;
      font-weight:700;
      cursor:pointer;
      transition:transform .16s ease,box-shadow .18s ease,background .18s ease,border-color .18s ease;
      text-align:center;
    }
    .btn-primary{
      background:linear-gradient(135deg,#fb7185,#e11d48);
      border-color:rgba(248,113,113,0.8);
      box-shadow:0 14px 35px rgba(190,24,93,0.7);
      color:#fdf2f8;
    }
    .btn-primary:hover{
      transform:translateY(-1px) scale(1.01);
      box-shadow:0 18px 45px rgba(190,24,93,0.8);
    }
    .btn-ghost{
      background:rgba(15,23,42,0.92);
      border-color:rgba(148,163,184,0.5);
      color:#e5e7eb;
    }
    .btn-ghost:hover{
      background:rgba(15,23,42,1);
      transform:translateY(-1px);
      box-shadow:0 14px 35px rgba(15,23,42,0.9);
    }
    .hero-meta{
      margin-top:6px;
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      font-size:11px;
      color:var(--muted);
    }
    .hero-meta span{
      padding:3px 8px;
      border-radius:999px;
      border:1px solid rgba(55,65,81,0.9);
      background:rgba(15,23,42,0.95);
    }

    /* SECTIONS */
    section{
      margin-bottom:26px;
    }
    .section-header{
      margin-bottom:12px;
      display:flex;
      justify-content:space-between;
      align-items:flex-end;
      gap:12px;
    }
    .section-title{
      font-size:17px;
      font-weight:700;
    }
    .section-badge{
      font-size:10px;
      text-transform:uppercase;
      letter-spacing:.16em;
      color:var(--accent-soft);
      font-weight:700;
    }
    .section-sub{
      font-size:12px;
      color:var(--muted);
      margin-bottom:14px;
    }

    .box{
      background:radial-gradient(circle at top left,#020617,#020617);
      border-radius:var(--radius-lg);
      border:1px solid rgba(148,163,184,0.35);
      padding:14px;
      box-shadow:0 14px 35px rgba(15,23,42,0.85);
    }

    /* HIZLI REZERVASYON */
    .fast-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
      gap:10px;
      align-items:flex-end;
    }
    label{
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:.12em;
      color:var(--muted);
      font-weight:700;
      display:block;
      margin-bottom:3px;
    }
    select,input[type="number"],input[type="date"]{
      width:100%;
      padding:7px 9px;
      border-radius:var(--radius-md);
      border:1px solid rgba(148,163,184,0.6);
      background:#020617;
      color:#e5e7eb;
      font-size:13px;
      outline:none;
      transition:border-color .17s ease,box-shadow .17s ease,background .17s ease;
    }
    select:focus,input:focus{
      border-color:#3b82f6;
      box-shadow:0 0 0 1px rgba(59,130,246,0.6);
      background:#020617;
    }
    #fast-total{
      font-size:12px;
      color:var(--muted);
      text-align:right;
      margin-bottom:4px;
    }

    /* FİLO ARAÇ KARTLARI */
    .fleet-toolbar{
      display:flex;
      flex-wrap:wrap;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      margin-bottom:10px;
      font-size:12px;
      color:var(--muted);
    }
    .fleet-count{
      padding:4px 9px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.5);
      background:rgba(15,23,42,0.9);
    }
    .fleet-sort{
      display:flex;
      align-items:center;
      gap:6px;
    }
    .fleet-sort select{
      width:auto;
    }

    .fleet-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
      gap:15px;
    }
    .card{
      border-radius:var(--radius-lg);
      border:1px solid rgba(148,163,184,0.4);
      background:radial-gradient(circle at top,#111827,#020617);
      box-shadow:var(--shadow);
      overflow:hidden;
      display:flex;
      flex-direction:column;
      transform:translateY(6px);
      opacity:0;
      animation:cardIn .45s ease forwards;
      animation-delay:var(--delay,0ms);
    }
    @keyframes cardIn{
      to{opacity:1;transform:translateY(0);}
    }
    .card-media{
      position:relative;
      height:190px;
      overflow:hidden;
      cursor:pointer;
    }
    .card-media img{
      width:100%;
      height:100%;
      object-fit:cover;
      transform:scale(1.04);
      transition:transform .6s ease;
    }
    .card:hover .card-media img{
      transform:scale(1.08);
    }
    .badge{
      position:absolute;
      top:10px;
      left:10px;
      padding:4px 8px;
      border-radius:999px;
      font-size:10px;
      text-transform:uppercase;
      letter-spacing:.14em;
      background:#3b82f6;
      color:#eff6ff;
      box-shadow:0 10px 25px rgba(15,23,42,0.9);
      font-weight:700;
    }
    .badge.discount{
      right:10px;
      left:auto;
      background:#f97316;
      color:#fffbeb;
    }
    .card-body{
      padding:11px 13px 13px;
      display:flex;
      flex-direction:column;
      gap:7px;
    }
    .car-title{
      font-size:15px;
      font-weight:800;
    }
    .meta-row{
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      font-size:11px;
      color:var(--muted);
    }
    .meta-pill{
      padding:3px 7px;
      border-radius:999px;
      border:1px solid rgba(55,65,81,0.9);
      background:rgba(15,23,42,0.95);
    }
    .price-row{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      align-items:baseline;
      font-size:13px;
    }
    .price-main{
      font-size:16px;
      font-weight:800;
    }
    .price-month{
      font-size:12px;
      color:var(--muted);
    }
    .deposit{
      font-size:12px;
      color:#facc15;
      font-weight:600;
    }
    .desc{
      font-size:12px;
      color:var(--muted);
    }
    .calc-row{
      margin-top:4px;
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      align-items:center;
      font-size:11px;
    }
    .calc-row input[type="date"]{
      font-size:11px;
      padding:5px 7px;
    }
    .calc-total{
      margin-left:auto;
      font-weight:700;
    }
    .card-buttons{
      margin-top:7px;
      display:flex;
      flex-wrap:wrap;
      gap:7px;
    }
    .btn-wa{
      background:var(--wa);
      border-color:rgba(5,150,105,0.7);
      color:#022c22;
    }
    .btn-wa:hover{
      transform:translateY(-1px);
      box-shadow:0 14px 35px rgba(5,150,105,0.9);
    }
    .btn-outline{
      background:transparent;
      border-color:rgba(148,163,184,0.65);
      color:#e5e7eb;
    }
    .btn-outline:hover{
      background:rgba(15,23,42,0.95);
    }

    /* BİLGİ KUTULARI */
    .grid-3{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
      gap:14px;
    }
    .info-title{
      font-size:13px;
      font-weight:700;
      margin-bottom:4px;
    }
    .info-text{
      font-size:12px;
      color:var(--muted);
    }

    /* FOOTER */
    footer{
      border-top:1px solid rgba(148,163,184,0.4);
      padding:16px 5% 20px;
      text-align:center;
      font-size:12px;
      color:var(--muted);
      background:radial-gradient(circle at top,#020617,#020617);
    }

    /* WHATSAPP SABİT */
    .wa-fixed{
      position:fixed;
      right:14px;
      bottom:14px;
      z-index:20;
      padding:9px 15px;
      border-radius:999px;
      background:var(--wa);
      color:#022c22;
      font-size:13px;
      font-weight:800;
      display:inline-flex;
      align-items:center;
      gap:6px;
      box-shadow:0 18px 45px rgba(5,150,105,0.95);
      transition:transform .16s ease,box-shadow .18s ease;
    }
    .wa-fixed:hover{
      transform:translateY(-1px) scale(1.02);
      box-shadow:0 22px 55px rgba(5,150,105,1);
    }

    /* MODAL */
    .modal{
      position:fixed;
      inset:0;
      background:rgba(15,23,42,0.9);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:16px;
      z-index:40;
      opacity:0;
      pointer-events:none;
      transition:opacity .2s ease;
    }
    .modal.show{
      opacity:1;
      pointer-events:auto;
    }
    .modal-inner{
      max-width:900px;
      width:100%;
      max-height:90vh;
      overflow:auto;
      background:#020617;
      border-radius:var(--radius-lg);
      border:1px solid rgba(148,163,184,0.4);
      box-shadow:0 24px 65px rgba(0,0,0,0.95);
      padding:12px;
    }
    .modal-close{
      float:right;
      border:none;
      border-radius:999px;
      padding:6px 10px;
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:.13em;
      background:rgba(248,113,113,0.1);
      color:#fecaca;
      border:1px solid rgba(248,113,113,0.7);
      cursor:pointer;
      margin-bottom:6px;
    }
    .modal-layout{
      display:flex;
      flex-wrap:wrap;
      gap:13px;
    }
    .modal-media{
      flex:1;
      min-width:250px;
      max-width:430px;
      border-radius:16px;
      overflow:hidden;
      position:relative;
      background:#020617;
      height:260px;
    }
    .modal-media img{
      width:100%;
      height:100%;
      object-fit:cover;
    }
    .slider-btn{
      position:absolute;
      top:50%;
      transform:translateY(-50%);
      border:none;
      border-radius:999px;
      padding:6px 9px;
      font-size:13px;
      background:rgba(15,23,42,0.9);
      color:#e5e7eb;
      cursor:pointer;
      box-shadow:0 12px 30px rgba(0,0,0,0.9);
    }
    .slider-btn.left{left:8px;}
    .slider-btn.right{right:8px;}
    .modal-info{
      flex:1;
      min-width:250px;
    }
    .modal-info h3{
      font-size:16px;
      margin-bottom:5px;
    }
    .modal-meta{
      font-size:12px;
      color:var(--muted);
      margin-bottom:6px;
    }
    .modal-desc{
      font-size:12px;
      color:var(--muted);
    }

    /* RESPONSIVE */
    @media(max-width:720px){
      header{flex-direction:column;align-items:flex-start;}
      nav{justify-content:flex-start;}
      .hero-media{height:210px;}
      .hero-overlay{padding:14px 14px 16px;}
      .hero h1{font-size:18px;}
      main{padding-inline:4%;}
      .wa-fixed{right:10px;bottom:10px;}
    }
  </style>
</head>
<body>

  <header>
    <div class="logo">
      <img src="images/logo.png" alt="Flora Car Filo" />
      <div>
        <div class="logo-text-main">FLORA CAR FİLO</div>
        <div class="logo-text-sub">Kurumsal & bireysel araç kiralama</div>
      </div>
    </div>
    <nav>
      <a href="#fleet">Araçlar</a>
      <a href="#fast">Hızlı Rezervasyon</a>
      <a href="#services">Hizmetler</a>
      <a href="#about">Hakkımızda</a>
      <a href="#contact">İletişim</a>
    </nav>
  </header>

  <main>
    <!-- HERO -->
    <section class="hero">
      <div class="hero-media">
        <img src="images/hero.jpg" alt="Araç filosu" />
        <div class="hero-overlay">
          <div class="hero-pill">2025 Yeni Sezon • Günlük / Aylık / Filo</div>
          <h1>Yeni nesil araç kiralama deneyimi.</h1>
          <p class="hero-sub">
            Flora Car Filo; bakımlı, sigortalı ve yeni model araç filosu ile kurumsal ve bireysel müşterilere
            şeffaf, hızlı ve konforlu kiralama sunar. 7/24 WhatsApp iletişim.
          </p>
          <div class="hero-actions">
            <a href="#fleet" class="btn btn-primary">Araç Filomuzu Gör</a>
            <a href="tel:+905016446451" class="btn btn-ghost">Hemen Ara: +90 501 644 64 51</a>
          </div>
          <div class="hero-meta">
            <span>Sınırsız KM Seçenekleri</span>
            <span>Full kasko & sigorta</span>
            <span>Havalimanı ve vale teslim</span>
          </div>
        </div>
      </div>
    </section>

    <!-- HIZLI REZERVASYON -->
    <section id="fast">
      <div class="section-header">
        <div>
          <div class="section-title">Hızlı Rezervasyon</div>
          <div class="section-badge">Tek form, anında WhatsApp</div>
        </div>
      </div>
      <p class="section-sub">
        Araç, şehir ve gün sayısını seçin; sistem otomatik hesaplasın, WhatsApp mesajınız hazır olsun.
      </p>
      <div class="box">
        <div class="fast-grid">
          <div>
            <label for="fastCar">Araç</label>
            <select id="fastCar">
              <option value="">Araç seçiniz</option>
            </select>
          </div>
          <div>
            <label for="fastCity">Şehir</label>
            <select id="fastCity">
              <option value="">Şehir seçiniz</option>
              <option>İstanbul</option>
              <option>Ankara</option>
              <option>İzmir</option>
              <option>Antalya</option>
              <option>Bursa</option>
              <option>Muğla</option>
              <option>Gaziantep</option>
              <option>Konya</option>
              <option>Diğer</option>
            </select>
          </div>
          <div>
            <label for="fastDays">Gün sayısı</label>
            <input type="number" id="fastDays" min="1" placeholder="Gün" />
          </div>
          <div style="text-align:right">
            <div id="fast-total">Toplam: -</div>
            <a id="fastWa" class="btn btn-wa" href="#" target="_blank" rel="noopener">WhatsApp’tan Gönder</a>
          </div>
        </div>
      </div>
    </section>

    <!-- ARAÇ FİLOSU -->
    <section id="fleet">
      <div class="section-header">
        <div>
          <div class="section-title">Araç Filosu</div>
          <div class="section-badge">Günlük & uzun dönem</div>
        </div>
      </div>
      <p class="section-sub">
        Tüm araçlarımız periyodik bakımları tam, sigortalı ve teslimat öncesi temizlikleri yapılmış şekilde sunulur.
      </p>

      <div class="fleet-toolbar">
        <div class="fleet-count" id="fleetCount">Toplam araç: -</div>
        <div class="fleet-sort">
          <span>Sırala:</span>
          <select id="sortSelect">
            <option value="recommended">Önerilen</option>
            <option value="price-asc">Fiyat (Artan)</option>
            <option value="price-desc">Fiyat (Azalan)</option>
            <option value="year-desc">Model Yılı (Yeni → Eski)</option>
          </select>
        </div>
      </div>

      <div class="fleet-grid" id="fleetContainer"></div>
    </section>

    <!-- HİZMETLER -->
    <section id="services">
      <div class="section-header">
        <div>
          <div class="section-title">Hizmetlerimiz</div>
          <div class="section-badge">Operasyonel çözümler</div>
        </div>
      </div>
      <div class="grid-3">
        <div class="box">
          <div class="info-title">Kasko & Sigorta</div>
          <div class="info-text">Tüm araçlarımız full kasko ve zorunlu sigorta kapsamındadır.</div>
        </div>
        <div class="box">
          <div class="info-title">Vale & Havalimanı Teslim</div>
          <div class="info-text">İstanbul, Sabiha Gökçen, Antalya, İzmir gibi havalimanlarında vale teslim.</div>
        </div>
        <div class="box">
          <div class="info-title">Uzun Dönem Filo</div>
          <div class="info-text">Kurumsal firmalara özel filo çözümleri, raporlama ve operasyon hizmetleri.</div>
        </div>
      </div>
    </section>

    <!-- HAKKIMIZDA -->
    <section id="about">
      <div class="section-header">
        <div>
          <div class="section-title">Hakkımızda</div>
          <div class="section-badge">2009'dan bugüne</div>
        </div>
      </div>
      <div class="box">
        <p class="info-text">
          Flora Car Filo; 2009 yılından itibaren bireysel ve kurumsal müşterilere araç kiralama hizmeti sunmaktadır.
          Filomuz, bakımları düzenli yapılan ve sigorta süreçleri eksiksiz yönetilen araçlardan oluşur.
          Teslimat, vale, havalimanı karşılama ve uzun dönem filo yönetimi gibi operasyonel süreçleri sizin adınıza
          uçtan uca planlar ve yürütürüz.
        </p>
      </div>
    </section>

    <!-- İLETİŞİM -->
    <section id="contact">
      <div class="section-header">
        <div>
          <div class="section-title">İletişim</div>
          <div class="section-badge">7/24 ulaşım</div>
        </div>
      </div>
      <div class="box">
        <p class="info-text">
          Telefon: <a href="tel:+905016446451">+90 501 644 64 51</a><br/>
          E-posta: <a href="mailto:info@floracarfilo.com">info@floracarfilo.com</a><br/>
          WhatsApp: <a href="https://wa.me/+905016446451" target="_blank" rel="noopener">+90 501 644 64 51</a><br/>
          Türkiye geneli hizmet verilmektedir.
        </p>
      </div>
    </section>
  </main>

  <footer>
    © Flora Car Filo – Tüm hakları saklıdır.
  </footer>

  <a class="wa-fixed" href="https://wa.me/+905016446451" target="_blank" rel="noopener">
    WhatsApp Destek
  </a>

  <!-- MODAL (ARAÇ DETAY) -->
  <div id="carModal" class="modal" aria-hidden="true">
    <div class="modal-inner">
      <button class="modal-close" type="button" onclick="closeCarModal()">Kapat</button>
      <div class="modal-layout">
        <div class="modal-media">
          <button class="slider-btn left" type="button" onclick="prevSlide()">◀</button>
          <img id="modalImg" src="" alt="Araç görseli" />
          <button class="slider-btn right" type="button" onclick="nextSlide()">▶</button>
        </div>
        <div class="modal-info">
          <h3 id="modalTitle"></h3>
          <div id="modalMeta" class="modal-meta"></div>
          <p id="modalDesc" class="modal-desc">
            Araç bakımları rutin olarak yapılmakta olup, sigorta ve kasko kapsamı teslimat öncesinde detaylı şekilde paylaşılır.
          </p>
          <div class="calc-row" style="margin-top:8px;">
            <label>Başlangıç
              <input type="date" id="modalStart" />
            </label>
            <label>Bitiş
              <input type="date" id="modalEnd" />
            </label>
            <div class="calc-total" id="modalTotal">Toplam: -</div>
          </div>
          <div style="margin-top:10px;">
            <a id="modalWa" class="btn btn-wa" href="#" target="_blank" rel="noopener">WhatsApp’tan Sor</a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Basit araç verisi (görsellere göre isimleri sen kendi yapına göre düzenleyebilirsin)
    const DEPOSIT = 3000;
    const vehicles = [
      {name:'Hyundai i20', img:'hyundai-i20.png', gallery:['hyundai-i20.png','i20-ic.png'], price:1100, fuel:'Benzin', gear:'Otomatik', year:2024},
      {name:'Renault Clio', img:'renault-clio.png', gallery:['renault-clio.png','clio-ic.png'], price:1100, fuel:'Dizel', gear:'Otomatik', year:2023},
      {name:'Opel Corsa', img:'opel-corsa.png', gallery:['opel-corsa.png','corsa-ic.png'], price:1100, fuel:'Benzin', gear:'Otomatik', year:2024},
      {name:'Fiat Egea', img:'fiat-egea.png', gallery:['fiat-egea.png','egea-ic.png'], price:1100, fuel:'Dizel', gear:'Otomatik', year:2025},
      {name:'Toyota Corolla', img:'toyota-corolla.png', gallery:['toyota-corolla.png','corolla-ic.png'], price:1200, fuel:'Benzin', gear:'Otomatik', year:2025},
      {name:'Renault Megane 4', img:'megane-4.png', gallery:['megane-4.png','megane-ic.png'], price:1300, fuel:'Dizel', gear:'Otomatik', year:2024},
      {name:'VW Passat', img:'passat.png', gallery:['passat.png','passat-ic.png'], price:1600, fuel:'Dizel', gear:'Otomatik', year:2024},
      {name:'Audi A3', img:'audi-a3.png', gallery:['audi-a3.png','a3-ic.png'], price:1800, fuel:'Benzin', gear:'Otomatik', year:2025}
    ];

    function tl(v){return v.toLocaleString('tr-TR') + ' ₺';}
    function daysBetween(a,b){
      if(!a || !b) return 0;
      const d1 = new Date(a), d2 = new Date(b);
      const diff = Math.ceil((d2-d1)/(1000*60*60*24));
      return diff>0 ? diff : 0;
    }

    function sortedVehicles(type){
      const arr = [...vehicles];
      if(type==='price-asc') return arr.sort((a,b)=>a.price-b.price);
      if(type==='price-desc') return arr.sort((a,b)=>b.price-a.price);
      if(type==='year-desc') return arr.sort((a,b)=>b.year-a.year || a.price-b.price);
      return arr;
    }

    function renderFleet(sortType='recommended'){
      const container = document.getElementById('fleetContainer');
      const countEl = document.getElementById('fleetCount');
      container.innerHTML='';
      const list = sortedVehicles(sortType);
      if(countEl) countEl.textContent = 'Toplam araç: ' + list.length;

      list.forEach((v,idx)=>{
        const card = document.createElement('article');
        card.className='card';
        card.style.setProperty('--delay', idx*60+'ms');

        const monthly = v.price*30;
        const isDisc = idx < 3; // ilk 3 kampanyalı gibi

        card.innerHTML = `
          <div class="card-media" data-index="${vehicles.indexOf(v)}">
            <img src="images/${v.img}" alt="${v.name}" />
            <div class="badge">Sınırsız KM</div>
            ${isDisc ? '<div class="badge discount">%10 Aylık İndirim</div>' : ''}
          </div>
          <div class="card-body">
            <div class="car-title">${v.name}</div>
            <div class="meta-row">
              <span class="meta-pill">${v.fuel}</span>
              <span class="meta-pill">${v.gear}</span>
              <span class="meta-pill">Model ${v.year}</span>
            </div>
            <div class="price-row">
              <div class="price-main">${tl(v.price)} / Gün</div>
              <div class="deposit">Depozito: ${tl(DEPOSIT)}</div>
              <div class="price-month">Aylık (30g): ${tl(isDisc ? monthly*0.9 : monthly)}</div>
            </div>
            <div class="desc">
              Araç bakımları düzenli yapılır. Teslimat öncesi temizlik ve kontrol işlemleri tamamlanır.
            </div>
            <div class="calc-row">
              <label>Başlangıç
                <input type="date" class="start" />
              </label>
              <label>Bitiş
                <input type="date" class="end" />
              </label>
              <div class="calc-total">Toplam: -</div>
            </div>
            <div class="card-buttons">
              <a href="tel:+905016446451" class="btn btn-outline">Hemen Ara</a>
              <a href="#" class="btn btn-wa wa-card" target="_blank" rel="noopener">WhatsApp</a>
              <button type="button" class="btn btn-outline detail-btn" data-index="${vehicles.indexOf(v)}">Detay</button>
            </div>
          </div>
        `;

        const start = card.querySelector('.start');
        const end = card.querySelector('.end');
        const totalEl = card.querySelector('.calc-total');
        const waBtn = card.querySelector('.wa-card');

        function updateTotal(){
          const d = daysBetween(start.value,end.value);
          if(d>0){
            const total = d*v.price;
            const grand = total + DEPOSIT;
            totalEl.textContent = `Toplam (${d} gün): ${tl(total)} + ${tl(DEPOSIT)} depozito = ${tl(grand)}`;
            const msg = `Merhaba, ${v.name} için ${start.value} - ${end.value} (${d} gün) kiralama talebim var. Toplam: ${tl(total)} + ${tl(DEPOSIT)} depozito = ${tl(grand)}.`;
            waBtn.href = 'https://wa.me/+905016446451?text=' + encodeURIComponent(msg);
          }else{
            totalEl.textContent = 'Toplam: -';
            waBtn.href = 'https://wa.me/+905016446451';
          }
        }
        start.addEventListener('change',updateTotal);
        end.addEventListener('change',updateTotal);

        // Detay / modal
        const media = card.querySelector('.card-media');
        const detailBtn = card.querySelector('.detail-btn');
        [media, detailBtn].forEach(el=>{
          el.addEventListener('click',()=>{
            const index = parseInt(el.getAttribute('data-index'),10);
            openCarModal(index);
          });
        });

        container.appendChild(card);
      });
    }

    // Hızlı rezervasyon
    function setupFast(){
      const carSel = document.getElementById('fastCar');
      const citySel = document.getElementById('fastCity');
      const dayInp = document.getElementById('fastDays');
      const totalEl = document.getElementById('fast-total');
      const wa = document.getElementById('fastWa');

      vehicles.forEach(v=>{
        const opt = document.createElement('option');
        opt.value = v.name;
        opt.dataset.price = v.price;
        opt.textContent = `${v.name} – ${tl(v.price)}/gün`;
        carSel.appendChild(opt);
      });

      function updateFast(){
        const opt = carSel.selectedOptions[0];
        const name = opt ? opt.value : '';
        const price = opt ? Number(opt.dataset.price || 0) : 0;
        const city = citySel.value || 'Belirtilmemiş';
        const days = Number(dayInp.value || 0);
        if(!name || !price || !days){
          totalEl.textContent = 'Toplam: -';
          wa.href = '#';
          return;
        }
        const total = price*days;
        const grand = total + DEPOSIT;
        totalEl.textContent = `Toplam: ${days} gün x ${tl(price)} + ${tl(DEPOSIT)} depozito = ${tl(grand)}`;
        const msg = `Merhaba, ${name} aracı için ${city} şehrinde ${days} gün kiralama talebim var. Toplam: ${tl(total)} + ${tl(DEPOSIT)} depozito = ${tl(grand)}.`;
        wa.href = 'https://wa.me/+905016446451?text=' + encodeURIComponent(msg);
      }

      [carSel, citySel, dayInp].forEach(el=>el.addEventListener('input',updateFast));
    }

    // Modal
    let currentVehicle = null;
    let slideIndex = 0;

    function openCarModal(index){
      currentVehicle = vehicles[index];
      if(!currentVehicle) return;
      slideIndex = 0;
      const m = document.getElementById('carModal');
      document.getElementById('modalTitle').textContent = currentVehicle.name;
      document.getElementById('modalMeta').textContent =
        `Yakıt: ${currentVehicle.fuel} • Vites: ${currentVehicle.gear} • Model: ${currentVehicle.year} • Günlük: ${tl(currentVehicle.price)}`;
      document.getElementById('modalImg').src = 'images/' + currentVehicle.gallery[0];
      document.getElementById('modalStart').value='';
      document.getElementById('modalEnd').value='';
      document.getElementById('modalTotal').textContent='Toplam: -';
      document.getElementById('modalWa').href=
        'https://wa.me/+905016446451?text=' + encodeURIComponent(`Merhaba, ${currentVehicle.name} hakkında bilgi almak istiyorum.`);
      m.classList.add('show');
      m.setAttribute('aria-hidden','false');
    }
    function closeCarModal(){
      const m = document.getElementById('carModal');
      m.classList.remove('show');
      m.setAttribute('aria-hidden','true');
      currentVehicle=null;
    }
    function prevSlide(){
      if(!currentVehicle) return;
      slideIndex = (slideIndex - 1 + currentVehicle.gallery.length) % currentVehicle.gallery.length;
      document.getElementById('modalImg').src = 'images/' + currentVehicle.gallery[slideIndex];
    }
    function nextSlide(){
      if(!currentVehicle) return;
      slideIndex = (slideIndex + 1) % currentVehicle.gallery.length;
      document.getElementById('modalImg').src = 'images/' + currentVehicle.gallery[slideIndex];
    }
    function updateModalTotal(){
      if(!currentVehicle) return;
      const s = document.getElementById('modalStart').value;
      const e = document.getElementById('modalEnd').value;
      const d = daysBetween(s,e);
      const totalEl = document.getElementById('modalTotal');
      const wa = document.getElementById('modalWa');
      if(d>0){
        const total = d*currentVehicle.price;
        totalEl.textContent = `Toplam (${d} gün): ${tl(total)}`;
        const msg = `Merhaba, ${currentVehicle.name} için ${s} - ${e} (${d} gün) kiralama fiyatı hakkında bilgi almak istiyorum. Tahmini toplam: ${tl(total)}.`;
        wa.href = 'https://wa.me/+905016446451?text=' + encodeURIComponent(msg);
      }else{
        totalEl.textContent='Toplam: -';
        wa.href = 'https://wa.me/+905016446451?text=' + encodeURIComponent(`Merhaba, ${currentVehicle.name} hakkında bilgi almak istiyorum.`);
      }
    }

    document.addEventListener('DOMContentLoaded',()=>{
      renderFleet();
      setupFast();

      const sortSel = document.getElementById('sortSelect');
      sortSel.addEventListener('change',e=>renderFleet(e.target.value));

      document.getElementById('modalStart').addEventListener('change',updateModalTotal);
      document.getElementById('modalEnd').addEventListener('change',updateModalTotal);

      document.getElementById('carModal').addEventListener('click',e=>{
        if(e.target.id==='carModal') closeCarModal();
      });
      document.addEventListener('keydown',e=>{
        if(e.key==='Escape') closeCarModal();
      });
    });

    // global
    window.openCarModal=openCarModal;
    window.closeCarModal=closeCarModal;
    window.prevSlide=prevSlide;
    window.nextSlide=nextSlide;
  </script>
</body>
</html>
